<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Classer les animaux | Sauvages vs Domestiques</title>
<style>
  :root{
    --bg:#f7fafc;--card:#ffffff;--ink:#0f172a;--muted:#64748b;--brand:#2563eb;--ok:#10b981;--bad:#ef4444;--shadow:0 14px 38px rgba(15,23,42,.08);--radius:16px
  }
  *{box-sizing:border-box}
  body{margin:0;background:linear-gradient(180deg,#f8fafc,#eef2f7 60%,#e8eef7);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,"PingFang SC","Noto Sans CJK SC","Microsoft YaHei",sans-serif;color:var(--ink)}
  .wrap{max-width:1100px;margin:22px auto 64px;padding:0 18px}
  header{display:flex;align-items:center;gap:12px}
  .logo{width:38px;height:38px;border-radius:10px;background:#e0f2fe;display:grid;place-items:center;font-size:20px}
  h1{margin:0;font-size:24px}
  .sub{color:var(--muted);font-size:13px}
  .hud{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin:14px 0}
  .btn{appearance:none;border:0;background:var(--brand);color:#fff;padding:9px 12px;border-radius:12px;font-weight:700;cursor:pointer;box-shadow:0 10px 18px rgba(37,99,235,.25)}
  .btn.ghost{background:#eef2ff;color:#1e40af}
  .select{padding:8px 10px;border-radius:10px;border:1px solid #cbd5e1;background:#fff}
  .stat{padding:8px 12px;background:#fff;border:1px solid #e6ebf2;border-radius:10px}

  .board{display:grid;grid-template-columns:1fr 1fr;gap:16px}
  .col{background:var(--card);border-radius:var(--radius);padding:14px;box-shadow:var(--shadow);border:1px solid #e6ebf2;min-height:340px}
  .col h2{margin:0 0 10px;font-size:16px;color:#1e293b;display:flex;align-items:center;gap:8px}

  .pool{display:grid;grid-template-columns:repeat(auto-fill, minmax(150px,1fr));gap:10px}
  .chip{user-select:none;background:#fff;border:1px solid #e6ebf2;border-radius:12px;padding:8px 10px;box-shadow:0 6px 14px rgba(2,6,23,.06);display:flex;align-items:center;justify-content:center;gap:8px;cursor:grab}
  .chip:active{cursor:grabbing;transform:scale(.98)}
  .chip .fr{font-weight:700}
  .chip .speak{border:1px solid #cbd5e1;background:#eef2ff;color:#1e40af;font-size:12px;padding:2px 6px;border-radius:8px;cursor:pointer}

  .bins{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .bin{min-height:180px;background:#fbfdff;border:2px dashed #d7deea;border-radius:14px;padding:12px;display:flex;flex-direction:column;gap:10px;transition:border-color .12s ease, background .12s ease}
  .bin[data-hover="1"]{border-color:var(--brand);background:#f0f7ff}
  .bin-title{font-weight:800;letter-spacing:.3px;margin-bottom:2px}
  .bin .slot{min-height:42px;border:1px dashed #e2e8f0;border-radius:10px;padding:6px;display:flex;align-items:center;gap:8px}
  .emoji{font-size:20px}
  .ok{background:#ecfdf5;border-color:#a7f3d0}
  .bad{background:#fef2f2;border-color:#fecaca}

  footer{margin-top:14px;color:var(--muted);font-size:12px}
  .toast{position:fixed;left:50%;bottom:24px;transform:translateX(-50%);background:#111827;color:#fff;padding:10px 14px;border-radius:12px;opacity:0;pointer-events:none;transition:opacity .25s ease}
  .toast.show{opacity:1}

  @media (max-width:900px){.board{grid-template-columns:1fr}}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">🧩</div>
      <div>
        <h1>Classer les animaux — Sauvages vs Domestiques</h1>
        <div class="sub">把动物拖入正确的分类框。正确则放入并计分，错误则留在左侧。支持法语发音🔊</div>
      </div>
    </header>

    <div class="hud">
      <button class="btn" id="startBtn">开始新一轮</button>
      <button class="btn ghost" id="revealBtn">显示答案</button>
      <label>题量：
        <select id="count" class="select">
          <option>8</option>
          <option selected>12</option>
          <option>16</option>
          <option>20</option>
        </select>
      </label>
      <label>范围：
        <select id="scope" class="select">
          <option value="all" selected>全部</option>
          <option value="sauvage">仅野生</option>
          <option value="domestique">仅家畜</option>
        </select>
      </label>
      <div class="stat">得分 <span id="score">0</span>/<span id="total">0</span></div>
      <div class="stat">用时 <span id="time">00:00</span></div>
    </div>

    <div class="board">
      <section class="col">
        <h2>① 拖拽这些动物（法语）</h2>
        <div class="pool" id="pool"></div>
      </section>
      <section class="col">
        <h2>② 分类（Sauvages | Domestiques）</h2>
        <div class="bins">
          <div class="bin" id="binS" data-type="sauvage">
            <div class="bin-title">🟢 Animaux sauvages（野生动物）</div>
            <div class="slot-list" id="slotS"></div>
          </div>
          <div class="bin" id="binD" data-type="domestique">
            <div class="bin-title">🟣 Animaux domestiques（家畜）</div>
            <div class="slot-list" id="slotD"></div>
          </div>
        </div>
      </section>
    </div>

    <footer>保存为 <code>.html</code> 后可在 PPT 里以超链接打开。建议使用 Chrome/Edge 以支持发音功能。</footer>
  </div>

  <div class="toast" id="toast">Très bien！已全部分类 ✅</div>

<script>
// 数据集：法语、中文、类别、Emoji
const BANK = [
  // Sauvages
  {fr:'le loup', zh:'狼', cat:'sauvage', emo:'🐺'},
  {fr:'l\'ours', zh:'熊', cat:'sauvage', emo:'🐻'},
  {fr:'le renard', zh:'狐狸', cat:'sauvage', emo:'🦊'},
  {fr:'le sanglier', zh:'野猪', cat:'sauvage', emo:'🐗'},
  {fr:'le lièvre', zh:'野兔', cat:'sauvage', emo:'🐇'},
  {fr:'le hérisson', zh:'刺猬', cat:'sauvage', emo:'🦔'},
  {fr:'le blaireau', zh:'獾', cat:'sauvage', emo:'🦡'},
  {fr:'l\'écureuil', zh:'松鼠', cat:'sauvage', emo:'🐿️'},
  {fr:'le hibou', zh:'猫头鹰', cat:'sauvage', emo:'🦉'},
  {fr:'l\'aigle', zh:'鹰', cat:'sauvage', emo:'🦅'},
  {fr:'le lynx', zh:'猞猁', cat:'sauvage', emo:'🐆'},
  {fr:'le castor', zh:'河狸', cat:'sauvage', emo:'🦫'},
  {fr:'le renne', zh:'驯鹿', cat:'sauvage', emo:'🦌'},
  {fr:'le phoque', zh:'海豹', cat:'sauvage', emo:'🦭'},
  {fr:'le dauphin', zh:'海豚', cat:'sauvage', emo:'🐬'},
  {fr:'le chamois', zh:'岩羚羊', cat:'sauvage', emo:'🦌'},
  {fr:'le bouquetin', zh:'野生山羊/北山羊', cat:'sauvage', emo:'🐐'},
  {fr:'le cerf', zh:'鹿', cat:'sauvage', emo:'🫎'},
  {fr:'la marmotte', zh:'旱獭', cat:'sauvage', emo:'🐿️'},

  // Domestiques
  {fr:'le chien', zh:'狗', cat:'domestique', emo:'🐕'},
  {fr:'le chat', zh:'猫', cat:'domestique', emo:'🐈'},
  {fr:'le cochon', zh:'猪', cat:'domestique', emo:'🐖'},
  {fr:'la chèvre', zh:'山羊', cat:'domestique', emo:'🐐'},
  {fr:'le cheval', zh:'马', cat:'domestique', emo:'🐎'},
  {fr:'l\'âne', zh:'驴', cat:'domestique', emo:'🫏'},
  {fr:'la poule', zh:'母鸡', cat:'domestique', emo:'🐔'},
  {fr:'le coq', zh:'公鸡', cat:'domestique', emo:'🐓'},
  {fr:'le canard', zh:'鸭', cat:'domestique', emo:'🦆'},
  {fr:'l\'oie', zh:'鹅', cat:'domestique', emo:'🪿'},
  {fr:'la dinde', zh:'火鸡', cat:'domestique', emo:'🦃'},
  {fr:'le lapin domestique', zh:'家兔', cat:'domestique', emo:'🐇'},
  {fr:'le pigeon', zh:'鸽子', cat:'domestique', emo:'🕊️'},
  {fr:'le mouton', zh:'绵羊', cat:'domestique', emo:'🐑'},
  {fr:'la brebis', zh:'母羊', cat:'domestique', emo:'🐑'},
  {fr:'la vache', zh:'母牛', cat:'domestique', emo:'🐄'}
];

const $ = s => document.querySelector(s);
const $$= s => Array.from(document.querySelectorAll(s));
const shuffle = a => a.sort(()=>Math.random()-0.5);
let picked=[], score=0, total=0, timer=null, t0=0;

function fmt(n){return String(n).padStart(2,'0')}
function startTimer(){ stopTimer(); t0=Date.now(); timer=setInterval(()=>{const dt=Math.floor((Date.now()-t0)/1000);$('#time').textContent=`${fmt(Math.floor(dt/60))}:${fmt(dt%60)}`;},500) }
function stopTimer(){ if(timer){clearInterval(timer); timer=null;} }

function speakFR(text){ try{const u=new SpeechSynthesisUtterance(text); u.lang='fr-FR'; speechSynthesis.speak(u);}catch(e){} }

function pick(){
  const n = parseInt($('#count').value,10);
  const scope = $('#scope').value;
  let pool = BANK.slice();
  if(scope!=='all') pool = pool.filter(x=>x.cat===scope);
  picked = shuffle(pool).slice(0,n);
}

function renderPool(){
  const pool = $('#pool'); pool.innerHTML='';
  picked.forEach((it,i)=>{
    const chip=document.createElement('div');
    chip.className='chip'; chip.draggable=true; chip.dataset.idx=i;
    chip.innerHTML = `<span class="emoji">${it.emo}</span><span class="fr">${it.fr}</span> <button class="speak" title="Lire">🔊</button>`;
    chip.querySelector('.speak').addEventListener('click',()=>speakFR(it.fr));
    chip.addEventListener('dragstart',ev=>{ ev.dataTransfer.setData('text/plain', String(i)); ev.dataTransfer.effectAllowed='move'; });
    pool.appendChild(chip);
  });
}

function bindBin(el){
  el.addEventListener('dragover',ev=>{ev.preventDefault(); el.dataset.hover='1'});
  el.addEventListener('dragleave',()=>{el.dataset.hover='0'});
  el.addEventListener('drop',ev=>{
    ev.preventDefault(); el.dataset.hover='0';
    const key = parseInt(ev.dataTransfer.getData('text/plain'),10);
    const item = picked[key]; if(!item) return;
    const need = el.dataset.type; // sauvages/domestiques
    if(item.cat === need){
      // 正确：把 chip 移到 bin 里并锁定
      const chip = document.querySelector(`.chip[data-idx="${key}"]`);
      if(chip){ chip.draggable=false; chip.style.opacity='.9'; chip.querySelector('.speak').disabled=false; }
      const slot=document.createElement('div'); slot.className='slot ok';
      slot.innerHTML = `<span class="emoji">${item.emo}</span> <strong>${item.fr}</strong> <span style="color:#64748b">— ${item.zh}</span>`;
      el.querySelector('.slot-list').appendChild(slot);
      chip && chip.remove();
      score++; $('#score').textContent=score; if(score===total){ toast('Très bien！已全部分类 ✅'); stopTimer(); }
    } else {
      // 错误：闪红
      el.classList.add('bad'); setTimeout(()=>el.classList.remove('bad'),600);
    }
  });
}

function toast(msg){ const t=$('#toast'); t.textContent=msg; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),1400); }

function start(){
  pick(); score=0; total=picked.length; $('#score').textContent=0; $('#total').textContent=total;
  $('#slotS').innerHTML=''; $('#slotD').innerHTML='';
  renderPool(); startTimer();
}

function reveal(){
  // 把剩余全部自动放入正确的 bin
  $$('.chip').forEach(chip=>{
    const i=Number(chip.dataset.idx); const it=picked[i]; const bin = it.cat==='sauvage' ? $('#binS') : $('#binD');
    const slot=document.createElement('div'); slot.className='slot ok';
    slot.innerHTML = `<span class="emoji">${it.emo}</span> <strong>${it.fr}</strong> <span style=\"color:#64748b\">— ${it.zh}</span>`;
    bin.querySelector('.slot-list').appendChild(slot); chip.remove();
  });
  score=total; $('#score').textContent=score; stopTimer(); toast('已显示全部答案');
}

// 事件绑定
$('#startBtn').addEventListener('click',start);
$('#revealBtn').addEventListener('click',reveal);
['binS','binD'].forEach(id=> bindBin(document.getElementById(id)) );

// 初始一轮
start();
</script>
</body>
</html>
